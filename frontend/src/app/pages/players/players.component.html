<div>
  <app-navbar></app-navbar>
</div>
<app-header-secondary></app-header-secondary>
<main class="flex" style="margin-bottom: 60px;">
  <aside class="w-1/3 p-4">
    <label class="label">Nacionalidad</label>
    <select [(ngModel)]="nacionalidadFiltro"
      class="select select-bordered w-full">
      <option value>Seleccione una nacionalidad:</option>
      <option [ngValue]="nacionalidadesUnicas[0]">{{ nacionalidadesUnicas[0]
        }}</option>
      <option *ngFor="let nacionalidad of nacionalidadesUnicas.slice(1)"
        [value]="nacionalidad">{{ nacionalidad }}</option>
    </select>
    <label class="label">Rango de Edad</label>
    <div class="flex flex-wrap">
      <div *ngFor="let rango of rangosEdad" class="form-control mr-2 mb-2">
        <label class="label cursor-pointer">
          <span class="label-text">{{ rango }}</span>
          <input type="radio" [value]="rango" [(ngModel)]="edadFiltro"
            name="edadFiltro" class="radio checked:bg-primary" />
        </label>
      </div>
    </div>
    <label class="label">Rango de Peso</label>
    <div class="flex flex-wrap">
      <div *ngFor="let rango of rangosPeso" class="form-control mr-2 mb-2">
        <label class="label cursor-pointer">
          <span class="label-text">{{ rango }}</span>
          <input type="radio" [value]="rango" [(ngModel)]="pesoFiltro"
            name="pesoFiltro" class="radio checked:bg-primary" />
        </label>
      </div>
    </div>
    <label class="label">Rango de Estatura</label>
    <div class="flex flex-wrap">
      <div *ngFor="let rango of rangosEstatura" class="form-control mr-2 mb-2">
        <label class="label cursor-pointer">
          <span class="label-text">{{ rango }}</span>
          <input type="radio" [value]="rango" [(ngModel)]="estaturaFiltro"
            name="estaturaFiltro" class="radio checked:bg-primary" />
        </label>
      </div>
    </div>
    <label class="label">Pie Dominante</label>
    <div class="flex">
      <div *ngFor="let pie of piesDominantes" class="form-control mr-2">
        <label class="label cursor-pointer">
          <span class="label-text">{{ pie }}</span>
          <input type="radio" [value]="pie" [(ngModel)]="pieDominanteFilter"
            name="pieDominante" class="radio checked:bg-primary" />
        </label>
      </div>
    </div>

    <button (click)="filtrarJugadores()" class="btn btn-primary"
      [style.background-color]="'#C84343'">Aplicar
      filtros</button>
    <button (click)="limpiarFiltros()" class="btn btn-secondary ml-2"
      [style.background-color]="'#142740'">Limpiar
      filtros</button>
    <ng-template #noResults>
      <div class="text-red-500">No se encontraron resultados.</div>
    </ng-template>
  </aside>

  <div class="w-2/3 p-4">
    <div class="grid grid-cols-3 gap-4">
      <div
        *ngFor="let player of filteredPlayers | paginate: { itemsPerPage: pageSize, currentPage: currentPage }">
        <div class="card glass mb-10 h-96">
          <figure><img src="{{player.photo}}" alt="{{player.name}}"
              class="w-full h-48 object-cover" /></figure>
          <div class="card-body">
            <h2 class="card-title">{{player.name}}</h2>
            <p>{{player.actualTeam}}</p>
            <p>{{player.nationality}}</p>
            <div class="card-actions justify-end">
              <a [routerLink]="['/player', player.id]"
                class="btn btn-primary">Detalles</a>
              <button (click)="openConfirmModal()"
                class="btn btn-danger ml-2">Eliminar</button>
              <!-- modal para eliminar jugador -->

            </div>
          </div>

        </div>
        <!-- Nuevo modal de confirmación -->
        <div *ngIf="confirmModal" class="fixed z-10 inset-0 overflow-y-auto"
          aria-labelledby="modal-title" role="dialog" aria-modal="true">
          <div
            class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div
              class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
              aria-hidden="true"></div>

            <!-- Contenido del modal de confirmación -->
            <div
              class="inline-block align-middle bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
              <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:flex-col sm:items-start">
                  <!-- Icono de alerta -->
                  <svg class="w-24 h-44 mx-auto mb-4 text-red-500" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 9v2m0 4h.01m-6.85-7.12a9 9 0 1 1 12.73 0L12 2.83l-5.15 5.15z"></path>
                  </svg>
                  <!-- Mensaje de confirmación -->
                  <h3 class="text-lg leading-6 font-medium text-gray-900"
                    id="modal-title">
                    ¿Estás seguro de eliminar a este jugador?
                  </h3>
                </div>
              </div>
              <!-- Botones de confirmar y cancelar -->
              <div
                class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <!-- Botón de aceptar -->
                <button (click)="eliminarJugador(player.id)" type="button"
                  class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                  Aceptar
                </button>
                <!-- Botón de cancelar -->
                <button (click)="confirmModal = false" type="button"
                  class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
    <div *ngIf="resumenFiltros; else noFiltros">
      <p>Filtros aplicados: {{ resumenFiltros }}</p>
    </div>
    <ng-template #noFiltros>
      <p>No se han aplicado filtros.</p>
    </ng-template>

    <div *ngIf="filteredPlayers.length === 0; else showResults">
      <ng-container *ngTemplateOutlet="noResults"></ng-container>
    </div>

    <ng-template #showResults>
      <div class="grid grid-cols-3 gap-4">
        <!-- Resto del código para mostrar los jugadores -->
      </div>
    </ng-template>
    <pagination-controls
      (pageChange)="currentPage = $event"
      previousLabel="Anterior"
      nextLabel="Siguiente"
      class="mt-4 mb-12"></pagination-controls>
  </div>
</main>
<div>
  <app-footer></app-footer>
</div>
